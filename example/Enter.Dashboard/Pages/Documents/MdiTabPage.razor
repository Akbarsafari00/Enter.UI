@page "/documents/mdi-tabs"
@using Enter.Ui.Cores.Contracts
@inherits Enter.Ui.Bases.EntPageBase
@layout DocumentLayout

<EntMdiTab Tag="MdiTabPage" Responsive ItemDirection="EntTabItemDirection.Horizontal"
           @ref="MdiTab"
           KeepPanelAlive="true"
           PanelClass="h-full"
           ActiveClass=""
           Closeable
           class="border-0 "
           Direction="EntTabDirection.Vertical">
    <EntCard class="mt-4">
        <CardBody>
            <EntButton @onclick="NewTab">Open New Tab</EntButton>
        </CardBody>
    </EntCard>

</EntMdiTab>


@code {

    [Inject]
    public IEntMdiService MdiService { get; set; } = default!;


    public EntMdiTab MdiTab { get; set; } = default!;

    public async Task NewTab()
    {
        for (var i = 0; i < 3; i++)
        {
            await MdiService.AddNewTabAsync<FormLayout>(Guid.NewGuid().ToString(), $"Upload Box {i}", "ri-upload-line");
        }
    }

    protected override void OnAfterRender(bool firstRender)
    {
        Console.WriteLine($"{nameof(MdiTabPage)} rendred");
        base.OnAfterRender(firstRender);
    }
    public void LogInstances()
    {
        Console.WriteLine(MdiTab.GetInstance().Count);
    }

}