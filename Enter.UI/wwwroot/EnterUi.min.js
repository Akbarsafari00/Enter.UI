export function getExpandableComponent(){return new ExpandableComponent}export function getLayoutComponent(){return new LayoutComponent}export function getPopoverComponent(){return new PopOverComponent}export function getShared(){return new Shared}export class ExpandableComponent{_dotNetRef;initialize(dotNetRef,id,show){this._dotNetRef=dotNetRef;this.toggle(id,show)}toggle(id,show){const expandableNode=document.getElementById(id);console.log(id,show);expandableNode&&(expandableNode.style.height=show?expandableNode.offsetHeight+"px":"0px")}}export class LayoutComponent{_dotNetRef;_sidebar;_layoutBreakWidth;initialize(dotNetRef,sidebarIsShow,layoutBreakWidth){console.log("start initialize LayoutComponent");this._dotNetRef=dotNetRef;this._layoutBreakWidth=layoutBreakWidth;this._sidebar=document.querySelector(".ent-layout-sidebar");this.handleResize(this._sidebar,this._layoutBreakWidth);this.toggleSidebar(sidebarIsShow);window.addEventListener("resize",()=>this.handleResize(this._sidebar,this._layoutBreakWidth))}toggleSidebar(sidebarIsShow){this._sidebar.style.transition="all 0.25s ease-in";sidebarIsShow?(this._sidebar.classList.add("show"),this._sidebar.style.marginInlineStart=0):(this._sidebar.classList.remove("show"),this._sidebar.style.marginInlineStart=`-${this._sidebar.offsetWidth}px`)}handleResize(){window.innerWidth<this._layoutBreakWidth?(this._sidebar.classList.add("ent-layout-sidebar-overlap"),this._dotNetRef.invokeMethodAsync("CloseSidebarAsync")):(this._sidebar.classList.remove("ent-layout-sidebar-overlap"),this._dotNetRef.invokeMethodAsync("OpenSidebarAsync"))}}export class PopOverComponent{_dotNetRef;_map={};flipMargin=0;flipClassReplacements={top:{"ent-popover-top-left":"ent-popover-bottom-left","ent-popover-top-center":"ent-popover-bottom-center","ent-popover-anchor-bottom-center":"ent-popover-anchor-top-center","ent-popover-top-right":"ent-popover-bottom-right"},left:{"ent-popover-top-left":"ent-popover-top-right","ent-popover-center-left":"ent-popover-center-right","ent-popover-anchor-center-right":"ent-popover-anchor-center-left","ent-popover-bottom-left":"ent-popover-bottom-right"},right:{"ent-popover-top-right":"ent-popover-top-left","ent-popover-center-right":"ent-popover-center-left","ent-popover-anchor-center-left":"ent-popover-anchor-center-right","ent-popover-bottom-right":"ent-popover-bottom-left"},bottom:{"ent-popover-bottom-left":"ent-popover-top-left","ent-popover-bottom-center":"ent-popover-top-center","ent-popover-anchor-top-center":"ent-popover-anchor-bottom-center","ent-popover-bottom-right":"ent-popover-top-right"},"top-and-left":{"ent-popover-top-left":"ent-popover-bottom-right"},"top-and-right":{"ent-popover-top-right":"ent-popover-bottom-left"},"bottom-and-left":{"ent-popover-bottom-left":"ent-popover-top-right"},"bottom-and-right":{"ent-popover-bottom-right":"ent-popover-top-left"}};constructor(){window.addEventListener("scroll",()=>{this.placePopoverByClassSelector("ent-popover-fixed"),this.placePopoverByClassSelector("ent-popover-overflow-flip-always")});window.addEventListener("resize",()=>{this.placePopoverByClassSelector()})}initialize(dotNetRef){console.log("start initialize PopOverComponent");this._dotNetRef=dotNetRef}getPositionForFlippedPopver(inputArray,selector,boundingRect,selfRect){const classList=[];for(var i=0;i<inputArray.length;i++){const item=inputArray[i],replacments=this.flipClassReplacements[selector][item];replacments?classList.push(replacments):classList.push(item)}return this.calculatePopoverPosition(classList,boundingRect,selfRect)}calculatePopoverPosition(list,boundingRect,selfRect){let top=0,left=0;list.indexOf("ent-popover-anchor-top-left")>=0?(left=boundingRect.left,top=boundingRect.top):list.indexOf("ent-popover-anchor-top-center")>=0?(left=boundingRect.left+boundingRect.width/2,top=boundingRect.top):list.indexOf("ent-popover-anchor-top-right")>=0?(left=boundingRect.left+boundingRect.width,top=boundingRect.top):list.indexOf("ent-popover-anchor-center-left")>=0?(left=boundingRect.left,top=boundingRect.top+boundingRect.height/2):list.indexOf("ent-popover-anchor-center-center")>=0?(left=boundingRect.left+boundingRect.width/2,top=boundingRect.top+boundingRect.height/2):list.indexOf("ent-popover-anchor-center-right")>=0?(left=boundingRect.left+boundingRect.width,top=boundingRect.top+boundingRect.height/2):list.indexOf("ent-popover-anchor-bottom-left")>=0?(left=boundingRect.left,top=boundingRect.top+boundingRect.height):list.indexOf("ent-popover-anchor-bottom-center")>=0?(left=boundingRect.left+boundingRect.width/2,top=boundingRect.top+boundingRect.height):list.indexOf("ent-popover-anchor-bottom-right")>=0&&(left=boundingRect.left+boundingRect.width,top=boundingRect.top+boundingRect.height);let offsetX=0,offsetY=0;return list.indexOf("ent-popover-top-left")>=0?(offsetX=0,offsetY=0):list.indexOf("ent-popover-top-center")>=0?(offsetX=-selfRect.width/2,offsetY=0):list.indexOf("ent-popover-top-right")>=0?(offsetX=-selfRect.width,offsetY=0):list.indexOf("ent-popover-center-left")>=0?(offsetX=0,offsetY=-selfRect.height/2):list.indexOf("ent-popover-center-center")>=0?(offsetX=-selfRect.width/2,offsetY=-selfRect.height/2):list.indexOf("ent-popover-center-right")>=0?(offsetX=-selfRect.width,offsetY=-selfRect.height/2):list.indexOf("ent-popover-bottom-left")>=0?(offsetX=0,offsetY=-selfRect.height):list.indexOf("ent-popover-bottom-center")>=0?(offsetX=-selfRect.width/2,offsetY=-selfRect.height):list.indexOf("ent-popover-bottom-right")>=0&&(offsetX=-selfRect.width,offsetY=-selfRect.height),{top:top,left:left,offsetX:offsetX,offsetY:offsetY}}getAllObservedContainers(){const result=[];for(var i in this._map)result.push(i);return result}placePopoverByClassSelector(classSelector=null){var items=this.getAllObservedContainers();for(let i=0;i<items.length;i++){const popoverNode=document.getElementById("ent-popover-"+items[i]);this.placePopover(popoverNode,classSelector)}}placePopoverByNode(target){const id=target.id.substr(20),popoverNode=document.getElementById("ent-popover-"+id);this.placePopover(popoverNode)}placePopover(popoverNode,classSelector){if(popoverNode&&popoverNode.parentNode){const id=popoverNode.id.substr(12),popoverContentNode=document.getElementById("ent-popover-content-"+id);if(!popoverContentNode)return;if(popoverContentNode.classList.contains("ent-popover-open")==!1)return;if(classSelector&&popoverContentNode.classList.contains(classSelector)==!1)return;const boundingRect=popoverNode.parentNode.getBoundingClientRect();popoverContentNode.classList.contains("ent-popover-relative-width")&&(popoverContentNode.style["max-width"]=boundingRect.width+"px");const selfRect=popoverContentNode.getBoundingClientRect(),classList=popoverContentNode.classList,classListArray=Array.from(popoverContentNode.classList),postion=this.calculatePopoverPosition(classListArray,boundingRect,selfRect);let left=postion.left,top=postion.top,offsetX=postion.offsetX,offsetY=postion.offsetY;if(classList.contains("ent-popover-overflow-flip-onopen")||classList.contains("ent-popover-overflow-flip-always")){const appBarElements=document.getElementsByClassName("ent-appbar ent-appbar-fixed-top");let appBarOffset=0;appBarElements.length>0&&(appBarOffset=appBarElements[0].getBoundingClientRect().height);const graceMargin=this.flipMargin,deltaToLeft=left+offsetX,deltaToRight=window.innerWidth-left-selfRect.width,deltaTop=top-selfRect.height-appBarOffset,spaceToTop=top-appBarOffset,deltaBottom=window.innerHeight-top-selfRect.height;let selector=popoverContentNode.mudPopoverFliped;if(selector||(classList.contains("ent-popover-top-left")?deltaBottom<graceMargin&&deltaToRight<graceMargin&&spaceToTop>=selfRect.height&&deltaToLeft>=selfRect.width?selector="top-and-left":deltaBottom<graceMargin&&spaceToTop>=selfRect.height?selector="top":deltaToRight<graceMargin&&deltaToLeft>=selfRect.width&&(selector="left"):classList.contains("ent-popover-top-center")?deltaBottom<graceMargin&&spaceToTop>=selfRect.height&&(selector="top"):classList.contains("ent-popover-top-right")?deltaBottom<graceMargin&&deltaToLeft<graceMargin&&spaceToTop>=selfRect.height&&deltaToRight>=selfRect.width?selector="top-and-right":deltaBottom<graceMargin&&spaceToTop>=selfRect.height?selector="top":deltaToLeft<graceMargin&&deltaToRight>=selfRect.width&&(selector="right"):classList.contains("ent-popover-center-left")?deltaToRight<graceMargin&&deltaToLeft>=selfRect.width&&(selector="left"):classList.contains("ent-popover-center-right")?deltaToLeft<graceMargin&&deltaToRight>=selfRect.width&&(selector="right"):classList.contains("ent-popover-bottom-left")?deltaTop<graceMargin&&deltaToRight<graceMargin&&deltaBottom>=0&&deltaToLeft>=selfRect.width?selector="bottom-and-left":deltaTop<graceMargin&&deltaBottom>=0?selector="bottom":deltaToRight<graceMargin&&deltaToLeft>=selfRect.width&&(selector="left"):classList.contains("ent-popover-bottom-center")?deltaTop<graceMargin&&deltaBottom>=0&&(selector="bottom"):classList.contains("ent-popover-bottom-right")&&(deltaTop<graceMargin&&deltaToLeft<graceMargin&&deltaBottom>=0&&deltaToRight>=selfRect.width?selector="bottom-and-right":deltaTop<graceMargin&&deltaBottom>=0?selector="bottom":deltaToLeft<graceMargin&&deltaToRight>=selfRect.width&&(selector="right"))),selector&&selector!="none"){const newPosition=this.getPositionForFlippedPopver(classListArray,selector,boundingRect,selfRect);left=newPosition.left;top=newPosition.top;offsetX=newPosition.offsetX;offsetY=newPosition.offsetY;popoverContentNode.setAttribute("data-mudpopover-flip","flipped")}else popoverContentNode.removeAttribute("data-mudpopover-flip");classList.contains("ent-popover-overflow-flip-onopen")&&(popoverContentNode.mudPopoverFliped||(popoverContentNode.mudPopoverFliped=selector||"none"))}popoverContentNode.classList.contains("ent-popover-fixed")||(window.getComputedStyle(popoverNode).position=="fixed"?popoverContentNode.style.position="fixed":(offsetX+=window.scrollX,offsetY+=window.scrollY));popoverContentNode.style.left=left+offsetX+"px";popoverContentNode.style.top=top+offsetY+"px";window.getComputedStyle(popoverNode).getPropertyValue("z-index")!="auto"&&(popoverContentNode.style["z-index"]=window.getComputedStyle(popoverNode).getPropertyValue("z-index"),popoverContentNode.skipZIndex=!0)}}callback(id,mutationsList){for(const mutation of mutationsList)if(mutation.type==="attributes"){const target=mutation.target;if(mutation.attributeName=="class")target.classList.contains("ent-popover-overflow-flip-onopen")&&target.classList.contains("ent-popover-open")==!1&&(target.mudPopoverFliped=null,target.removeAttribute("data-mudpopover-flip")),this.placePopoverByNode(target);else if(mutation.attributeName=="data-ticks"){const tickAttribute=target.getAttribute("data-ticks"),parent=target.parentElement,tickValues=[];let max=-1;if(parent)for(let i=0;i<parent.children.length;i++){const childNode=parent.children[i],tickValue=parseInt(childNode.getAttribute("data-ticks"));tickValue!=0&&(tickValues.indexOf(tickValue)>=0||(tickValues.push(tickValue),tickValue>max&&(max=tickValue)))}if(tickValues.length==0)continue;const sortedTickValues=tickValues.sort((x,y)=>x-y);for(let i=0;i<parent.children.length;i++){const childNode=parent.children[i],tickValue=parseInt(childNode.getAttribute("data-ticks"));tickValue!=0&&childNode.skipZIndex!=!0&&(childNode.style["z-index"]="calc(var(--ent-zindex-popover) + "+(sortedTickValues.indexOf(tickValue)+3).toString()+")")}}}}connect(id){const popoverNode=document.getElementById("ent-popover-"+id),popoverContentNode=document.getElementById("ent-popover-content-"+id);if(popoverNode&&popoverNode.parentNode&&popoverContentNode){this.placePopover(popoverNode);const observer=new MutationObserver(this.callback.bind(this,id));observer.observe(popoverContentNode,{attributeFilter:["class","data-ticks"]});const resizeObserver=new ResizeObserver(entries=>{for(let entry of entries){const target=entry.target;for(var i=0;i<target.childNodes.length;i++){const childNode=target.childNodes[i];childNode.id&&childNode.id.startsWith("ent-popover-")&&this.placePopover(childNode)}}});resizeObserver.observe(popoverNode.parentNode);const contentNodeObserver=new ResizeObserver(entries=>{for(let entry of entries){var target=entry.target;this.placePopoverByNode(target)}});contentNodeObserver.observe(popoverContentNode);this._map[id]={mutationObserver:observer,resizeObserver:resizeObserver,contentNodeObserver:contentNodeObserver}}}}export class Shared{GetElementById(id){const element=document.getElementById(id);return{width:element.offsetWidth,height:element.offsetHeight,id:element.id}}GetElementByQuerySelector(selector){const element=document.querySelector(selector);return{width:element.offsetWidth,height:element.offsetHeight,id:element.id}}}